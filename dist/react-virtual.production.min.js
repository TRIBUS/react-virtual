!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactVirtual={},e.React)}(this,(function(e,t){"use strict";var r="default"in t?t.default:t;function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var r,n,u={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(u[r]=e[r]);return u}var i,o=["bottom","height","left","right","top","width"],a=new Map,c=function e(){var t=[];a.forEach((function(e,r){var n,u,i=r.getBoundingClientRect();n=i,u=e.rect,void 0===n&&(n={}),void 0===u&&(u={}),o.some((function(e){return n[e]!==u[e]}))&&(e.rect=i,t.push(e))})),t.forEach((function(e){e.callbacks.forEach((function(t){return t(e.rect)}))})),i=window.requestAnimationFrame(e)};var s="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function f(e){var t=r.useState(e.current),n=t[0],u=t[1],o=r.useReducer(l,null),f=o[0],d=o[1],v=r.useRef(!1);return s((function(){e.current!==n&&u(e.current)})),s((function(){if(n&&!v.current){v.current=!0;var e=n.getBoundingClientRect();d({rect:e})}}),[n]),r.useEffect((function(){if(n){var e,t,r=(e=n,t=function(e){d({rect:e})},{observe:function(){var r=0===a.size;a.has(e)?a.get(e).callbacks.push(t):a.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),r&&c()},unobserve:function(){var r=a.get(e);if(r){var n=r.callbacks.indexOf(t);n>=0&&r.callbacks.splice(n,1),r.callbacks.length||a.delete(e),a.size||cancelAnimationFrame(i)}}});return r.observe(),function(){r.unobserve()}}}),[n]),f}function l(e,t){var r=t.rect;return e&&e.height===r.height&&e.width===r.width?e:r}var d=function(){return 50},v=function(e){return e},h=function(e,t){return e[t?"offsetWidth":"offsetHeight"]},m=function(e){for(var t=Math.max(e.start-e.overscan,0),r=Math.min(e.end+e.overscan,e.size-1),n=[],u=t;u<=r;u++)n.push(u);return n};function p(e){var t,i,o=e.size,a=void 0===o?0:o,c=e.estimateSize,l=void 0===c?d:c,p=e.overscan,b=void 0===p?1:p,z=e.paddingStart,R=void 0===z?0:z,w=e.paddingEnd,O=void 0===w?0:w,k=e.parentRef,y=e.horizontal,E=e.scrollToFn,S=e.useObserver,x=e.onScrollElement,C=e.scrollOffsetFn,M=e.keyExtractor,F=void 0===M?v:M,T=e.measureSize,L=void 0===T?h:T,j=e.rangeExtractor,A=void 0===j?m:j,q=y?"width":"height",B=y?"scrollLeft":"scrollTop",V=r.useRef({scrollOffset:0,measurements:[]}),W=((S||f)(k)||((t={})[q]=0,t))[q];V.current.outerSize=W;var H=r.useCallback((function(e){k.current&&(k.current[B]=e)}),[k,B]),I=E||H;E=r.useCallback((function(e){I(e,H)}),[H,I]);var P=r.useState({}),_=P[0],X=P[1],Y=r.useCallback((function(){return X({})}),[]),D=r.useRef([]),G=r.useMemo((function(){var e=D.current.length>0?Math.min.apply(Math,D.current):0;D.current=[];for(var t=V.current.measurements.slice(0,e),r=e;r<a;r++){var n=F(r),u=_[n],i=t[r-1]?t[r-1].end:R,o="number"==typeof u?u:l(r),c=i+o;t[r]={index:r,start:i,size:o,end:c,key:n}}return t}),[l,_,R,a,F]),J=((null==(i=G[a-1])?void 0:i.end)||0)+O;V.current.measurements=G,V.current.totalSize=J;var K=r.useState({start:0,end:0}),N=K[0],Q=K[1],U=x?x.current:k.current,Z=r.useRef(C);Z.current=C;var $=r.useRef(null),ee=r.useCallback((function(){null!==$.current&&(clearTimeout($.current),$.current=null)}),[]);s((function(){return $.current=setTimeout((function(){Q((function(e){return g(V.current,e)}))})),function(){return ee()}}),[G,W,ee]),s((function(){if(!U)return Q({start:0,end:0}),void(V.current.scrollOffset=0);var e=function(e){var t=Z.current?Z.current(e):U[B];V.current.scrollOffset=t,ee(),Q((function(e){return g(V.current,e)}))};return e(),U.addEventListener("scroll",e,{capture:!1,passive:!0}),function(){U.removeEventListener("scroll",e)}}),[U,B,ee]);var te=r.useRef(L);te.current=L;var re=r.useMemo((function(){for(var e=A({start:N.start,end:N.end,overscan:b,size:G.length}),t=[],r=function(r,u){var i=e[r],o=n(n({},G[i]),{},{measureRef:function(e){if(e){var t=te.current(e,y);if(t!==o.size){var r=V.current.scrollOffset;o.start<r&&H(r+(t-o.size)),D.current.push(i),X((function(e){var r;return n(n({},e),{},((r={})[o.key]=t,r))}))}}}});t.push(o)},u=0,i=e.length;u<i;u++)r(u);return t}),[H,y,G,b,N.end,N.start,A]),ne=r.useRef();s((function(){ne.current&&l&&X({}),ne.current=!0}),[l]);var ue=r.useCallback((function(e,t){var r=(void 0===t?{}:t).align,n=void 0===r?"start":r,u=V.current,i=u.scrollOffset,o=u.outerSize;"auto"===n&&(n=e<=i?"start":e>=i+o?"end":"start"),"start"===n?E(e):"end"===n?E(e-o):"center"===n&&E(e-o/2)}),[E]),ie=r.useCallback((function(e,t){var r=void 0===t?{}:t,i=r.align,o=void 0===i?"auto":i,c=u(r,["align"]),s=V.current,f=s.measurements,l=s.scrollOffset,d=s.outerSize,v=f[Math.max(0,Math.min(e,a-1))];if(v){if("auto"===o)if(v.end>=l+d)o="end";else{if(!(v.start<=l))return;o="start"}var h="center"===o?v.start+v.size/2:"end"===o?v.end:v.start;ue(h,n({align:o},c))}}),[ue,a]),oe=r.useCallback((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];ie.apply(void 0,t),requestAnimationFrame((function(){ie.apply(void 0,t)}))}),[ie]);return{virtualItems:re,totalSize:J,scrollToOffset:ue,scrollToIndex:oe,measure:Y}}function g(e,t){for(var r=e.measurements,n=e.outerSize,u=e.scrollOffset,i=r.length-1,o=function(e,t,r,n){for(;e<=t;){var u=(e+t)/2|0,i=r(u);if(i<n)e=u+1;else{if(!(i>n))return u;t=u-1}}return e>0?e-1:0}(0,i,(function(e){return r[e].start}),u),a=o;a<i&&r[a].end<u+n;)a++;return t.start!==o||t.end!==a?{start:o,end:a}:t}e.defaultRangeExtractor=m,e.useVirtual=p,e.useVirtualWindow=function(e){var i=e.windowRef,o=e.scrollToFn,a=e.horizontal,c=e.parentRef,f=u(e,["windowRef","scrollToFn","horizontal","parentRef"]),l=a?"scrollX":"scrollY",d=r.useCallback((function(e){i.current&&(i.current[l]=e)}),[l,i]);return p(n(n({},f),{},{horizontal:a,parentRef:c,scrollToFn:o||d,onScrollElement:i,scrollOffsetFn:function(){var e=c.current.getBoundingClientRect();return a?-1*e.left:-1*e.top},useObserver:function(){return function(e){var r=t.useState({height:void 0,width:void 0}),n=r[0],u=r[1],i=e.current;return s((function(){var e=function(){var e={height:i.innerHeight,width:i.innerWidth};u((function(t){return t.height!==e.height||t.width!==e.width?e:t}))};return e(),i.addEventListener("resize",e),function(){i.removeEventListener("resize",e)}}),[i]),n}(i)}}))},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=react-virtual.production.min.js.map
