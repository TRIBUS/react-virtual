{"version":3,"file":"react-virtual.development.js","sources":["../node_modules/@reach/observe-rect/dist/observe-rect.esm.js","../src/useIsomorphicLayoutEffect.js","../src/useRect.js","../src/useWindowRect.js","../src/index.js"],"sourcesContent":["var props = ['bottom', 'height', 'left', 'right', 'top', 'width'];\n\nvar rectChanged = function rectChanged(a, b) {\n  if (a === void 0) {\n    a = {};\n  }\n\n  if (b === void 0) {\n    b = {};\n  }\n\n  return props.some(function (prop) {\n    return a[prop] !== b[prop];\n  });\n};\n\nvar observedNodes =\n/*#__PURE__*/\nnew Map();\nvar rafId;\n\nvar run = function run() {\n  var changedStates = [];\n  observedNodes.forEach(function (state, node) {\n    var newRect = node.getBoundingClientRect();\n\n    if (rectChanged(newRect, state.rect)) {\n      state.rect = newRect;\n      changedStates.push(state);\n    }\n  });\n  changedStates.forEach(function (state) {\n    state.callbacks.forEach(function (cb) {\n      return cb(state.rect);\n    });\n  });\n  rafId = window.requestAnimationFrame(run);\n};\n\nfunction observeRect(node, cb) {\n  return {\n    observe: function observe() {\n      var wasEmpty = observedNodes.size === 0;\n\n      if (observedNodes.has(node)) {\n        observedNodes.get(node).callbacks.push(cb);\n      } else {\n        observedNodes.set(node, {\n          rect: undefined,\n          hasRectChanged: false,\n          callbacks: [cb]\n        });\n      }\n\n      if (wasEmpty) run();\n    },\n    unobserve: function unobserve() {\n      var state = observedNodes.get(node);\n\n      if (state) {\n        // Remove the callback\n        var index = state.callbacks.indexOf(cb);\n        if (index >= 0) state.callbacks.splice(index, 1); // Remove the node reference\n\n        if (!state.callbacks.length) observedNodes[\"delete\"](node); // Stop the loop\n\n        if (!observedNodes.size) cancelAnimationFrame(rafId);\n      }\n    }\n  };\n}\n\nexport default observeRect;\n//# sourceMappingURL=observe-rect.esm.js.map\n","import React from 'react'\n\nexport default typeof window !== 'undefined'\n  ? React.useLayoutEffect\n  : React.useEffect\n","import React from 'react'\n\nimport observeRect from '@reach/observe-rect'\n\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect'\n\nexport default function useRect(nodeRef) {\n  const [element, setElement] = React.useState(nodeRef.current)\n  const [rect, dispatch] = React.useReducer(rectReducer, null)\n  const initialRectSet = React.useRef(false)\n\n  useIsomorphicLayoutEffect(() => {\n    if (nodeRef.current !== element) {\n      setElement(nodeRef.current)\n    }\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    if (element && !initialRectSet.current) {\n      initialRectSet.current = true\n      const rect = element.getBoundingClientRect();\n      dispatch({ rect });\n    }\n  }, [element])\n\n  React.useEffect(() => {\n    if (!element) {\n      return\n    }\n\n    const observer = observeRect(element, rect => {\n      dispatch({ rect });\n    });\n\n    observer.observe()\n\n    return () => {\n      observer.unobserve()\n    }\n  }, [element])\n\n  return rect\n}\n\nexport function useWindowRect(windowObj, nodeRef) {\n  const [rect, dispatch] = React.useReducer(rectReducer, null)\n  useIsomorphicLayoutEffect(() => {\n    dispatch({\n      rect: {\n        height: windowObj.innerHeight,\n        width: windowObj.innerWidth,\n      }\n    });\n  }, [windowObj])\n\n  React.useEffect(() => {\n    const resizeHandler = () => {\n      dispatch({\n        rect: {\n          height: windowObj.innerHeight,\n          width: windowObj.innerWidth,\n        }\n      });\n    };\n    resizeHandler();\n    windowObj.addEventListener(\"resize\", resizeHandler);\n    return () => {\n      windowObj.removeEventListener(\"resize\", resizeHandler);\n    };\n  }, [nodeRef, windowObj]);\n\n  return rect\n}\n\nfunction rectReducer(state, action) {\n  const rect = action.rect\n  if (!state || state.height !== rect.height || state.width !== rect.width) {\n    return rect\n  }\n  return state\n}\n\n","import * as React from 'react'\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect'\n\nexport default function useWindowRect(windowRef) {\n  const [rect, setRect] = React.useState({ height: undefined, width: undefined })\n\n  const element = windowRef.current\n\n  useIsomorphicLayoutEffect(() => {\n    const resizeHandler = () => {\n      const next = {\n        height: element.innerHeight,\n        width: element.innerWidth,\n      }\n      setRect(prev => (prev.height !== next.height || prev.width !== next.width ? next : prev))\n    }\n    resizeHandler()\n\n    element.addEventListener('resize', resizeHandler)\n    return () => {\n      element.removeEventListener('resize', resizeHandler)\n    }\n  }, [element])\n\n  return rect\n}","import React from 'react'\n\nimport useRect from './useRect'\nimport useWindowRect from './useWindowRect'\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect'\n\nconst defaultEstimateSize = () => 50\n\nconst defaultKeyExtractor = index => index\n\nconst defaultMeasureSize = (el, horizontal) => {\n  const key = horizontal ? 'offsetWidth' : 'offsetHeight'\n\n  return el[key]\n}\n\nexport const defaultRangeExtractor = range => {\n  const start = Math.max(range.start - range.overscan, 0)\n  const end = Math.min(range.end + range.overscan, range.size - 1)\n\n  const arr = []\n\n  for (let i = start; i <= end; i++) {\n    arr.push(i)\n  }\n\n  return arr\n}\n\nexport function useVirtualWindow({\n  windowRef,\n  scrollToFn,\n  horizontal,\n  parentRef,\n  ...rest\n}) {\n  const scrollKey = horizontal ? 'scrollX' : 'scrollY'\n  const defaultScrollToFn = React.useCallback(\n    offset => {\n      if (windowRef.current) {\n        windowRef.current[scrollKey] = offset\n      }\n    },\n    [scrollKey, windowRef]\n  )\n\n  return useVirtual({\n    ...rest,\n    horizontal,\n    parentRef,\n    scrollToFn: scrollToFn || defaultScrollToFn,\n    onScrollElement: windowRef,\n    scrollOffsetFn() {\n      const bounds = parentRef.current.getBoundingClientRect();\n      return horizontal ? bounds.left * -1 : bounds.top * -1;\n    },\n    useObserver: () => useWindowRect(windowRef),\n  });\n}\n\nexport function useVirtual({\n  size = 0,\n  estimateSize = defaultEstimateSize,\n  overscan = 1,\n  paddingStart = 0,\n  paddingEnd = 0,\n  parentRef,\n  horizontal,\n  scrollToFn,\n  useObserver,\n  onScrollElement,\n  scrollOffsetFn,\n  keyExtractor = defaultKeyExtractor,\n  measureSize = defaultMeasureSize,\n  rangeExtractor = defaultRangeExtractor,\n}) {\n  const sizeKey = horizontal ? 'width' : 'height'\n  const scrollKey = horizontal ? 'scrollLeft' : 'scrollTop'\n  const latestRef = React.useRef({\n    scrollOffset: 0,\n    measurements: [],\n  })\n  const useMeasureParent = useObserver || useRect\n\n  const { [sizeKey]: outerSize } = useMeasureParent(parentRef) || {\n    [sizeKey]: 0,\n  }\n  latestRef.current.outerSize = outerSize\n\n  const defaultScrollToFn = React.useCallback(\n    offset => {\n      if (parentRef.current) {\n        parentRef.current[scrollKey] = offset\n      }\n    },\n    [parentRef, scrollKey]\n  )\n\n  const resolvedScrollToFn = scrollToFn || defaultScrollToFn\n\n  scrollToFn = React.useCallback(\n    offset => {\n      resolvedScrollToFn(offset, defaultScrollToFn)\n    },\n    [defaultScrollToFn, resolvedScrollToFn]\n  )\n\n  const [measuredCache, setMeasuredCache] = React.useState({})\n\n  const measure = React.useCallback(() => setMeasuredCache({}), [])\n\n  const pendingMeasuredCacheIndexesRef = React.useRef([])\n\n  const measurements = React.useMemo(() => {\n    const min =\n      pendingMeasuredCacheIndexesRef.current.length > 0\n        ? Math.min(...pendingMeasuredCacheIndexesRef.current)\n        : 0\n    pendingMeasuredCacheIndexesRef.current = []\n\n    const measurements = latestRef.current.measurements.slice(0, min)\n\n    for (let i = min; i < size; i++) {\n      const key = keyExtractor(i)\n      const measuredSize = measuredCache[key]\n      const start = measurements[i - 1] ? measurements[i - 1].end : paddingStart\n      const size =\n        typeof measuredSize === 'number' ? measuredSize : estimateSize(i)\n      const end = start + size\n      measurements[i] = { index: i, start, size, end, key }\n    }\n    return measurements\n  }, [estimateSize, measuredCache, paddingStart, size, keyExtractor])\n\n  const totalSize = (measurements[size - 1]?.end || 0) + paddingEnd\n\n  latestRef.current.measurements = measurements\n  latestRef.current.totalSize = totalSize\n\n  const [range, setRange] = React.useState({ start: 0, end: 0 })\n\n  const element = onScrollElement ? onScrollElement.current : parentRef.current\n\n  const scrollOffsetFnRef = React.useRef(scrollOffsetFn)\n  scrollOffsetFnRef.current = scrollOffsetFn\n\n  const rangeTimeoutIdRef = React.useRef(null)\n\n  const cancelAsyncRange = React.useCallback(() => {\n    if (rangeTimeoutIdRef.current !== null) {\n      clearTimeout(rangeTimeoutIdRef.current)\n      rangeTimeoutIdRef.current = null\n    }\n  }, [])\n\n  useIsomorphicLayoutEffect(() => {\n    rangeTimeoutIdRef.current = setTimeout(() => {\n      setRange(prevRange => calculateRange(latestRef.current, prevRange))\n    })\n    return () => cancelAsyncRange()\n  }, [measurements, outerSize, cancelAsyncRange])\n\n  useIsomorphicLayoutEffect(() => {\n    if (!element) {\n      setRange({ start: 0, end: 0 })\n      latestRef.current.scrollOffset = 0\n\n      return\n    }\n\n    const onScroll = event => {\n      const scrollOffset = scrollOffsetFnRef.current\n        ? scrollOffsetFnRef.current(event)\n        : element[scrollKey]\n\n      latestRef.current.scrollOffset = scrollOffset\n\n      cancelAsyncRange()\n      setRange(prevRange => calculateRange(latestRef.current, prevRange))\n    }\n\n    // Determine initially visible range\n    onScroll()\n\n    element.addEventListener('scroll', onScroll, {\n      capture: false,\n      passive: true,\n    })\n\n    return () => {\n      element.removeEventListener('scroll', onScroll)\n    }\n  }, [element, scrollKey, cancelAsyncRange])\n\n  const measureSizeRef = React.useRef(measureSize)\n  measureSizeRef.current = measureSize\n\n  const virtualItems = React.useMemo(() => {\n    const indexes = rangeExtractor({\n      start: range.start,\n      end: range.end,\n      overscan,\n      size: measurements.length,\n    })\n\n    const virtualItems = []\n\n    for (let k = 0, len = indexes.length; k < len; k++) {\n      const i = indexes[k]\n      const measurement = measurements[i]\n\n      const item = {\n        ...measurement,\n        measureRef: el => {\n          if (el) {\n            const measuredSize = measureSizeRef.current(el, horizontal)\n\n            if (measuredSize !== item.size) {\n              const { scrollOffset } = latestRef.current\n\n              if (item.start < scrollOffset) {\n                defaultScrollToFn(scrollOffset + (measuredSize - item.size))\n              }\n\n              pendingMeasuredCacheIndexesRef.current.push(i)\n\n              setMeasuredCache(old => ({\n                ...old,\n                [item.key]: measuredSize,\n              }))\n            }\n          }\n        },\n      }\n\n      virtualItems.push(item)\n    }\n\n    return virtualItems\n  }, [\n    defaultScrollToFn,\n    horizontal,\n    measurements,\n    overscan,\n    range.end,\n    range.start,\n    rangeExtractor,\n  ])\n\n  const mountedRef = React.useRef()\n\n  useIsomorphicLayoutEffect(() => {\n    if (mountedRef.current) {\n      if (estimateSize) setMeasuredCache({})\n    }\n    mountedRef.current = true\n  }, [estimateSize])\n\n  const scrollToOffset = React.useCallback(\n    (toOffset, { align = 'start' } = {}) => {\n      const { scrollOffset, outerSize } = latestRef.current\n\n      if (align === 'auto') {\n        if (toOffset <= scrollOffset) {\n          align = 'start'\n        } else if (toOffset >= scrollOffset + outerSize) {\n          align = 'end'\n        } else {\n          align = 'start'\n        }\n      }\n\n      if (align === 'start') {\n        scrollToFn(toOffset)\n      } else if (align === 'end') {\n        scrollToFn(toOffset - outerSize)\n      } else if (align === 'center') {\n        scrollToFn(toOffset - outerSize / 2)\n      }\n    },\n    [scrollToFn]\n  )\n\n  const tryScrollToIndex = React.useCallback(\n    (index, { align = 'auto', ...rest } = {}) => {\n      const { measurements, scrollOffset, outerSize } = latestRef.current\n\n      const measurement = measurements[Math.max(0, Math.min(index, size - 1))]\n\n      if (!measurement) {\n        return\n      }\n\n      if (align === 'auto') {\n        if (measurement.end >= scrollOffset + outerSize) {\n          align = 'end'\n        } else if (measurement.start <= scrollOffset) {\n          align = 'start'\n        } else {\n          return\n        }\n      }\n\n      const toOffset =\n        align === 'center'\n          ? measurement.start + measurement.size / 2\n          : align === 'end'\n          ? measurement.end\n          : measurement.start\n\n      scrollToOffset(toOffset, { align, ...rest })\n    },\n    [scrollToOffset, size]\n  )\n\n  const scrollToIndex = React.useCallback(\n    (...args) => {\n      // We do a double request here because of\n      // dynamic sizes which can cause offset shift\n      // and end up in the wrong spot. Unfortunately,\n      // we can't know about those dynamic sizes until\n      // we try and render them. So double down!\n      tryScrollToIndex(...args)\n      requestAnimationFrame(() => {\n        tryScrollToIndex(...args)\n      })\n    },\n    [tryScrollToIndex]\n  )\n\n  return {\n    virtualItems,\n    totalSize,\n    scrollToOffset,\n    scrollToIndex,\n    measure,\n  }\n}\n\nconst findNearestBinarySearch = (low, high, getCurrentValue, value) => {\n  while (low <= high) {\n    let middle = ((low + high) / 2) | 0\n    let currentValue = getCurrentValue(middle)\n\n    if (currentValue < value) {\n      low = middle + 1\n    } else if (currentValue > value) {\n      high = middle - 1\n    } else {\n      return middle\n    }\n  }\n\n  if (low > 0) {\n    return low - 1\n  } else {\n    return 0\n  }\n}\n\nfunction calculateRange({ measurements, outerSize, scrollOffset }, prevRange) {\n  const size = measurements.length - 1\n  const getOffset = index => measurements[index].start\n\n  let start = findNearestBinarySearch(0, size, getOffset, scrollOffset)\n  let end = start\n\n  while (end < size && measurements[end].end < scrollOffset + outerSize) {\n    end++\n  }\n\n  if (prevRange.start !== start || prevRange.end !== end) {\n    return { start, end }\n  }\n\n  return prevRange\n}\n"],"names":["props","rectChanged","b","observedNodes","run","changedStates","newRect","node","state","rafId","window","observeRect","cb","observe","wasEmpty","rect","hasRectChanged","callbacks","unobserve","index","cancelAnimationFrame","React","useLayoutEffect","useEffect","useRect","nodeRef","useState","current","element","setElement","useReducer","rectReducer","dispatch","initialRectSet","useRef","useIsomorphicLayoutEffect","getBoundingClientRect","observer","action","height","width","useWindowRect","windowRef","undefined","setRect","resizeHandler","next","innerHeight","innerWidth","prev","addEventListener","removeEventListener","defaultEstimateSize","defaultKeyExtractor","defaultMeasureSize","el","horizontal","key","defaultRangeExtractor","range","start","Math","max","overscan","end","min","size","arr","i","push","useVirtualWindow","scrollToFn","parentRef","rest","scrollKey","defaultScrollToFn","useCallback","offset","useVirtual","onScrollElement","scrollOffsetFn","bounds","left","top","useObserver","estimateSize","paddingStart","paddingEnd","keyExtractor","measureSize","rangeExtractor","sizeKey","latestRef","scrollOffset","measurements","useMeasureParent","outerSize","resolvedScrollToFn","measuredCache","setMeasuredCache","measure","pendingMeasuredCacheIndexesRef","useMemo","length","slice","measuredSize","totalSize","setRange","scrollOffsetFnRef","rangeTimeoutIdRef","cancelAsyncRange","clearTimeout","setTimeout","prevRange","calculateRange","onScroll","event","capture","passive","measureSizeRef","virtualItems","indexes","k","len","measurement","item","measureRef","old","mountedRef","scrollToOffset","toOffset","align","tryScrollToIndex","scrollToIndex","args","requestAnimationFrame","findNearestBinarySearch","low","high","getCurrentValue","value","middle","currentValue","getOffset"],"mappings":"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"}